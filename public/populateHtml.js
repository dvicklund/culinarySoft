
$.get("/vendor/product", function(data) {
  // Grab product list container tbody element
  $list = $("#listBody");

  // Initialize counter (for auto-UPN population) and htmlString (for table row population)
  var counter = 1;
  var htmlString = '';

  // Loop through product data from DB and format
  data.forEach(function(curr, i, arr) {
    htmlString += '<tr id="' + curr._id + '">';

    // Remove button generated by checking product's _id property
    htmlString += '<td><form action="/vendor/product/' + curr._id + '" method="POST"><input type="submit" value="Remove"></input></form></td>';

    // Loop through each product to fill <td>s
    for(var j = 1; j < Object.keys(curr).length - 1; j++) {
                                      // Here, using the 'numeral' library to format 2nd column as currency
      j === 2 ? htmlString += '<td>' + numeral(Number(curr[Object.keys(curr)[j]])).format('$0,0.00') + ' /</td>'
              : htmlString += '<td>' + curr[Object.keys(curr)[j]] + '</td>';
    }
    htmlString += '</tr>';
    counter++;
  });

  // Fill the table with the new string
  $list.append(htmlString);

  // Set UPN automatically to the new number of products + 1
  $('#UPN').val(counter);
});

var displayResults = function(data) {
  $result = $('#searchResult');
  var htmlString = '';
  data.forEach(function(curr, i, arr) {
    htmlString += '<tr id="' + curr._id + '">';
    htmlString += '<td><form action="/vendor/product/' + curr._id + '" method="POST"><input type="submit" value="Remove"></input></form></td>';
    for(var j = 1; j < Object.keys(curr).length - 1; j++) {
      j === 2 ? htmlString += '<td>' + numeral(Number(curr[Object.keys(curr)[j]])).format('$0,0.00') + ' /</td>'
              : htmlString += '<td>' + curr[Object.keys(curr)[j]] + '</td>';
    }
    htmlString += '</tr>';
  });
  $result.append(htmlString);
};
